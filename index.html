<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>SpeedNexus</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no, viewport-fit=cover">
  <link rel="stylesheet" href="style.css">
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
</head>
<body>
  <div id="loginScreen" class="login-screen" style="display: none;">
    <div class="login-container">
      <div class="login-header">SpeedNexus</div>
      <div class="login-content">
        <h2>–í–≤–µ–¥–∏—Ç–µ –≤–∞—à–µ –∏–º—è</h2>
        <input type="text" id="loginUsername" placeholder="–í–∞—à –Ω–∏–∫–Ω–µ–π–º" maxlength="20" autocomplete="off" class="login-input">
        <div id="loginError" class="error-message"></div>
        <button id="loginButton" class="login-button">–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å</button>
        <div id="restoreSection" style="margin-top: 15px; display: none;">
          <button id="restoreAccountBtn" class="restore-btn">–í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Å–∫—Ä—ã—Ç—ã–π –∞–∫–∫–∞—É–Ω—Ç</button>
        </div>
      </div>
    </div>
  </div>

  <div id="chatsScreen" class="chats-screen" style="display: none;">
    <div class="chats-header">
      <div class="header-content">
        <span id="chatsTitle">–ß–∞—Ç—ã</span>
        <button id="chatsMenuBtn" class="menu-btn">‚ò∞</button>
      </div>
      <div class="search-container">
        <input type="text" id="searchChats" placeholder="–ü–æ–∏—Å–∫ —á–∞—Ç–æ–≤..." class="search-input">
      </div>
    </div>
    
    <div id="chatsList" class="chats-list"></div>
    
    <button id="newChatBtn" class="new-chat-btn">+</button>
  </div>

  <div id="chatScreen" class="chat-screen" style="display: none;">
    <div class="chat-header">
      <button id="backToChats" class="back-btn">‚Üê</button>
      <div class="chat-header-info">
        <h3 id="chatWithUser">-</h3>
        <div id="chatStatus" class="chat-status"></div>
      </div>
      <div style="width: 40px;"></div>
    </div>
    
    <div id="privateMessages" class="private-messages"></div>
    
    <div class="chat-input">
      <input type="text" id="messageInput" placeholder="–°–æ–æ–±—â–µ–Ω–∏–µ..." autocomplete="off">
      <button id="sendMessageBtn">‚û§</button>
    </div>
  </div>

  <div id="sideMenu" class="side-menu" style="display: none;">
    <div class="side-menu-header">
      <div class="user-info">
        <div class="user-avatar">üë§</div>
        <div>
          <h4 id="currentUsernameDisplay">-</h4>
          <div class="user-status">
            <span class="status-indicator online"></span>
            <span>online</span>
          </div>
        </div>
      </div>
      <button id="closeMenu" class="close-menu-btn">√ó</button>
    </div>
    
    <div class="side-menu-content">
      <button id="editProfileBtn" class="side-menu-btn">‚úèÔ∏è –ò–∑–º–µ–Ω–∏—Ç—å –ø—Ä–æ—Ñ–∏–ª—å</button>
      <button id="findFriendsBtn" class="side-menu-btn">üîç –ù–∞–π—Ç–∏ –¥—Ä—É–∑–µ–π</button>
      <button id="contactsBtn" class="side-menu-btn">üë• –ö–æ–Ω—Ç–∞–∫—Ç—ã</button>
      <button id="archiveAccountBtn" class="side-menu-btn delete">üóëÔ∏è –°–∫—Ä—ã—Ç—å –∞–∫–∫–∞—É–Ω—Ç</button>
      <button id="logoutBtn" class="side-menu-btn logout">üö™ –í—ã–π—Ç–∏</button>
    </div>
  </div>

  <div id="editProfileModal" class="modal" style="display: none;">
    <div class="modal-content">
      <div class="modal-header">
        <h3>–ò–∑–º–µ–Ω–∏—Ç—å –ø—Ä–æ—Ñ–∏–ª—å</h3>
        <button class="close-modal" data-modal="editProfileModal">√ó</button>
      </div>
      <div class="modal-body">
        <input type="text" id="editUsername" class="modal-input" maxlength="20" placeholder="–ù–æ–≤—ã–π –Ω–∏–∫–Ω–µ–π–º">
        <div id="editUsernameError" class="error-message"></div>
        <button id="saveProfileBtn" class="modal-btn">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
      </div>
    </div>
  </div>

  <div id="findFriendsModal" class="modal" style="display: none;">
    <div class="modal-content">
      <div class="modal-header">
        <h3>–ü–æ–∏—Å–∫</h3>
        <button class="close-modal" data-modal="findFriendsModal">√ó</button>
      </div>
      <div class="modal-body">
        <input type="text" id="searchUsername" class="modal-input" placeholder="–ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è">
        <div id="searchError" class="error-message"></div>
        <button id="searchBtn" class="modal-btn">–ù–∞–π—Ç–∏</button>
        <div id="searchResults" class="search-results"></div>
      </div>
    </div>
  </div>

  <div id="contactsModal" class="modal" style="display: none;">
    <div class="modal-content">
      <div class="modal-header">
        <h3>–ö–æ–Ω—Ç–∞–∫—Ç—ã</h3>
        <button class="close-modal" data-modal="contactsModal">√ó</button>
      </div>
      <div class="modal-body">
        <div id="contactsList" class="contacts-list"></div>
      </div>
    </div>
  </div>

  <div id="newChatModal" class="modal" style="display: none;">
    <div class="modal-content">
      <div class="modal-header">
        <h3>–ù–æ–≤—ã–π —á–∞—Ç</h3>
        <button class="close-modal" data-modal="newChatModal">√ó</button>
      </div>
      <div class="modal-body">
        <input type="text" id="newChatUsername" class="modal-input" placeholder="–ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è">
        <div id="newChatError" class="error-message"></div>
        <button id="startChatBtn" class="modal-btn">–ù–∞—á–∞—Ç—å —á–∞—Ç</button>
      </div>
    </div>
  </div>

  <script src="chat.js"></script>
</body>
</html>
